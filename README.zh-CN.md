# WuRi Calendar (吾日日历) — 每日时间管理与自我自省

[English](README.md) | [中文](README.zh-CN.md)

“吾日三省吾身”。
**WuRi (吾日)** 取自这句经典名言，意为“我每天...”。这是一款专注于当下、记录成长、融合了古老智慧的现代 Windows 桌面日历应用。
它不仅仅是一个时间管理工具，更是一个每日反思的伴侣。采用经典的三栏布局，帮助你规划一天的安排，同时通过“三件好事”和“三项改进”来记录生活点滴与自我成长。

## 功能特性

### 三栏布局

| 区域 | 功能 | 说明 |
|------|------|------|
| 左侧面板 | 今日三件好事 | 固定三条记录，跟随日期切换，支持隐藏/展开 |
| 中间主区域 | 日视图时间轴 | 00:00–23:30，30 分钟为最小单位，支持任务创建/编辑/删除/拖拽/拉伸 |
| 右侧面板 | 今日改进 | 一段文本记录，跟随日期切换，支持隐藏/展开 |

### 时间规则（严格遵守）

所有任务的时间单位固定为 **30 分钟**，合法时长为 30、60、90、120 分钟等。所有任务的开始时间只能是**整点**或**半点**。

### 核心交互

- **点击时间轴空白处**：在该时间段创建新任务
- **点击任务块**：编辑任务（名称、时间、时长、颜色）
- **拖拽任务块**：上下移动改变开始时间（自动吸附 30 分钟网格）
- **拖拽底部手柄**：拉伸/缩短任务时长（自动吸附 30 分钟倍数）
- **悬停显示删除按钮**：快速删除任务
- **当前时间红线**：仅在查看今天时显示

### 数据存储

所有数据以「日期」为唯一关联核心，每个日期包含：当天的日历任务、三件好事（三条）、改进记录（一条）。三个区域在任何情况下都保持日期一致。

- **Electron 环境**：数据保存在 `%APPDATA%/daily-calendar/calendar-data/` 目录下，每天一个 JSON 文件
- **浏览器环境**：数据保存在 localStorage 中（开发模式）

## 安装与使用

### 方式一：Windows 安装包（推荐）

下载 `WuRi Calendar (吾日日历) Setup 1.0.0.exe`，双击运行安装向导即可。

### 方式二：Windows 便携版

下载 `WuRi Calendar (吾日日历) 1.0.0.exe`，双击即可运行，无需安装。

### 方式三：从源码运行

```bash
# 进入项目目录
cd ubuntu/daily-calendar

# 安装依赖
pnpm install

# 开发模式（浏览器）
pnpm run dev

# 开发模式（Electron）
pnpm run electron:dev

# 构建 Windows 安装包
pnpm run electron:build
```

## 技术栈

| 技术 | 用途 |
|------|------|
| Electron 40 | 桌面应用框架 |
| React 19 | UI 框架 |
| TypeScript | 类型安全 |
| Vite 7 | 构建工具 |
| electron-builder | 打包工具 |

## 项目结构

```
daily-calendar/
├── electron/
│   ├── main.cjs          # Electron 主进程
│   └── preload.cjs       # 预加载脚本（IPC 桥接）
├── src/
│   ├── App.tsx            # 主应用组件（三栏布局）
│   ├── main.tsx           # React 入口
│   ├── types.ts           # 数据类型定义
│   ├── components/
│   │   └── TaskModal.tsx  # 任务创建/编辑弹窗
│   ├── utils/
│   │   └── storage.ts     # 数据存储层
│   └── styles/
│       └── global.css     # 全局样式（iCloud 风格）
├── assets/
│   └── icon.png           # 应用图标
└── package.json
```
